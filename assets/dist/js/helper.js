(()=>{"use strict";var e,t;e=wc_oca_helper_settings,t=wc_oca_translation_texts,window.ocaHelper={addNotice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";const o=ocaHelper.addPermanentNotice(e,t);setTimeout((function(){me(o).fadeOut()}),3e3)},addPermanentNotice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",o=document.createElement("p");return o.innerText=e,o.style.display="none",o.classList="oca-javascript-notice "+t,document.querySelector("#wpcontent").appendChild(o),me(o).fadeIn(null,1),o},removePermanentNotices(){any(".oca-javascript-notice").fadeOut(null,1)},popupWithIframe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=open("","ocaPopup","width=1024, height=768, location=no");o.document.title=t||"";let n=o.document.createElement("iframe");return n.style.width="100%",n.style.height="100vh",n.src=e,o.document.body.appendChild(n),o},popupWithUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=open(e,"ocaPopup","width=1024, height=768, location=no");return o.document.title=t||"",o},b64ToBlob(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512;const n=window.atob(e),a=[];for(let e=0;e<n.length;e+=o){const t=n.slice(e,e+o),l=new Array(t.length);for(let e=0;e<t.length;e++)l[e]=t.charCodeAt(e);const r=new Uint8Array(l);a.push(r)}return new Blob(a,{type:t})},async sendRequest(o,n,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r={failCallback:e=>ocaHelper.addNotice(e,"error"),useError:!1,errorMessage:null,loadingNotice:!1,button:null,body:null,genericErrorMessage:t.generic_error_try_again,...l};let{failCallback:c,useError:i,errorMessage:s,loadingNotice:d,button:u,body:p,genericErrorMessage:h}=r,g=null;u&&(g=u.textContent,u.textContent=t.loading,u.classAdd("disabled")),d&&ocaHelper.addPermanentNotice(t.loading,"warning");try{const t=`${e.store_url}/wp-json/oca-for-woocommerce/v1`;let l=await fetch(t+n,{method:o,headers:{"Content-Type":"application/json","X-WP-Nonce":e.nonce},body:p?JSON.stringify(p):null});if(d&&ocaHelper.removePermanentNotices(),!l.ok)return c(s??i?l.data??h:h),void(u&&(u.textContent=g,u.classRemove("disabled")));204!==l.status&&(l=await l.json()),a(l)}catch(e){c(s??i?e:h)}finally{u&&(u.textContent=g,u.classRemove("disabled"))}}}})();